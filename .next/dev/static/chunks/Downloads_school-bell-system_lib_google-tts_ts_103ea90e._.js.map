{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/user/Downloads/school-bell-system/lib/google-tts.ts"],"sourcesContent":["/**\r\n * Google Translate TTS Service (Unofficial)\r\n * Provides natural-sounding voices via Google's public TTS endpoint.\r\n * Useful as a high-quality fallback when paid AI voices are not configured.\r\n */\r\n\r\nimport type { Language } from \"./store\"\r\n\r\nexport const getGoogleTTSUrl = (text: string, language: Language = \"english\"): string => {\r\n    // Map internal languages to Google TTS codes\r\n    const langMap: Record<Language, string> = {\r\n        english: \"en\",\r\n        arabic: \"ar\",\r\n        hausa: \"ha\",\r\n        twi: \"ak\" // Akan (Twi)\r\n    }\r\n\r\n    const lang = langMap[language] || \"en\"\r\n    const encodedText = encodeURIComponent(text)\r\n\r\n    // Use our local proxy to avoid CORS issues\r\n    return `/api/tts?text=${encodedText}&lang=${lang}`\r\n}\r\n\r\nexport const playGoogleTTS = (text: string, language: Language = \"english\"): Promise<boolean> => {\r\n    return new Promise((resolve) => {\r\n        try {\r\n            const url = getGoogleTTSUrl(text, language)\r\n            const audio = new Audio(url)\r\n\r\n            audio.onended = () => {\r\n                console.log(\"[GoogleTTS] Playback finished\")\r\n                resolve(true)\r\n            }\r\n\r\n            audio.onerror = (e) => {\r\n                console.error(\"[GoogleTTS] Playback error:\", e)\r\n                resolve(false)\r\n            }\r\n\r\n            console.log(`[GoogleTTS] Playing: \"${text}\" (${language})`)\r\n            audio.play().catch(err => {\r\n                console.error(\"[GoogleTTS] Play failed (likely autoplay policy):\", err)\r\n                resolve(false)\r\n            })\r\n\r\n        } catch (error) {\r\n            console.error(\"[GoogleTTS] Setup error:\", error)\r\n            resolve(false)\r\n        }\r\n    })\r\n}\r\n"],"names":[],"mappings":"AAAA;;;;CAIC;;;;;;AAIM,MAAM,kBAAkB,CAAC,MAAc,WAAqB,SAAS;IACxE,6CAA6C;IAC7C,MAAM,UAAoC;QACtC,SAAS;QACT,QAAQ;QACR,OAAO;QACP,KAAK,KAAK,aAAa;IAC3B;IAEA,MAAM,OAAO,OAAO,CAAC,SAAS,IAAI;IAClC,MAAM,cAAc,mBAAmB;IAEvC,2CAA2C;IAC3C,OAAO,CAAC,cAAc,EAAE,YAAY,MAAM,EAAE,MAAM;AACtD;AAEO,MAAM,gBAAgB,CAAC,MAAc,WAAqB,SAAS;IACtE,OAAO,IAAI,QAAQ,CAAC;QAChB,IAAI;YACA,MAAM,MAAM,gBAAgB,MAAM;YAClC,MAAM,QAAQ,IAAI,MAAM;YAExB,MAAM,OAAO,GAAG;gBACZ,QAAQ,GAAG,CAAC;gBACZ,QAAQ;YACZ;YAEA,MAAM,OAAO,GAAG,CAAC;gBACb,QAAQ,KAAK,CAAC,+BAA+B;gBAC7C,QAAQ;YACZ;YAEA,QAAQ,GAAG,CAAC,CAAC,sBAAsB,EAAE,KAAK,GAAG,EAAE,SAAS,CAAC,CAAC;YAC1D,MAAM,IAAI,GAAG,KAAK,CAAC,CAAA;gBACf,QAAQ,KAAK,CAAC,qDAAqD;gBACnE,QAAQ;YACZ;QAEJ,EAAE,OAAO,OAAO;YACZ,QAAQ,KAAK,CAAC,4BAA4B;YAC1C,QAAQ;QACZ;IACJ;AACJ"}}]
}