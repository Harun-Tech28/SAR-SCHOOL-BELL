{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/user/Downloads/school-bell-system/app/api/tts/route.ts"],"sourcesContent":["import { NextRequest, NextResponse } from 'next/server'\r\n\r\nexport async function GET(request: NextRequest) {\r\n    const searchParams = request.nextUrl.searchParams\r\n    const text = searchParams.get('text')\r\n    const lang = searchParams.get('lang') || 'en'\r\n\r\n    if (!text) {\r\n        return NextResponse.json({ error: 'Text is required' }, { status: 400 })\r\n    }\r\n\r\n    try {\r\n        const encodedText = encodeURIComponent(text)\r\n        const url = `https://translate.google.com/translate_tts?ie=UTF-8&q=${encodedText}&tl=${lang}&client=tw-ob`\r\n\r\n        const response = await fetch(url, {\r\n            headers: {\r\n                'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/91.0.4472.124 Safari/537.36',\r\n                'Referer': 'http://translate.google.com/',\r\n            },\r\n        })\r\n\r\n        if (!response.ok) {\r\n            throw new Error(`Google TTS API responded with ${response.status}`)\r\n        }\r\n\r\n        const arrayBuffer = await response.arrayBuffer()\r\n        const buffer = Buffer.from(arrayBuffer)\r\n\r\n        return new NextResponse(buffer, {\r\n            headers: {\r\n                'Content-Type': 'audio/mpeg',\r\n                'Content-Length': buffer.length.toString(),\r\n            },\r\n        })\r\n    } catch (error) {\r\n        console.error('TTS Proxy Error:', error)\r\n        return NextResponse.json({ error: 'Failed to fetch TTS audio' }, { status: 500 })\r\n    }\r\n}\r\n"],"names":[],"mappings":";;;;AAAA;;AAEO,eAAe,IAAI,OAAoB;IAC1C,MAAM,eAAe,QAAQ,OAAO,CAAC,YAAY;IACjD,MAAM,OAAO,aAAa,GAAG,CAAC;IAC9B,MAAM,OAAO,aAAa,GAAG,CAAC,WAAW;IAEzC,IAAI,CAAC,MAAM;QACP,OAAO,yLAAY,CAAC,IAAI,CAAC;YAAE,OAAO;QAAmB,GAAG;YAAE,QAAQ;QAAI;IAC1E;IAEA,IAAI;QACA,MAAM,cAAc,mBAAmB;QACvC,MAAM,MAAM,CAAC,sDAAsD,EAAE,YAAY,IAAI,EAAE,KAAK,aAAa,CAAC;QAE1G,MAAM,WAAW,MAAM,MAAM,KAAK;YAC9B,SAAS;gBACL,cAAc;gBACd,WAAW;YACf;QACJ;QAEA,IAAI,CAAC,SAAS,EAAE,EAAE;YACd,MAAM,IAAI,MAAM,CAAC,8BAA8B,EAAE,SAAS,MAAM,EAAE;QACtE;QAEA,MAAM,cAAc,MAAM,SAAS,WAAW;QAC9C,MAAM,SAAS,OAAO,IAAI,CAAC;QAE3B,OAAO,IAAI,yLAAY,CAAC,QAAQ;YAC5B,SAAS;gBACL,gBAAgB;gBAChB,kBAAkB,OAAO,MAAM,CAAC,QAAQ;YAC5C;QACJ;IACJ,EAAE,OAAO,OAAO;QACZ,QAAQ,KAAK,CAAC,oBAAoB;QAClC,OAAO,yLAAY,CAAC,IAAI,CAAC;YAAE,OAAO;QAA4B,GAAG;YAAE,QAAQ;QAAI;IACnF;AACJ"}}]
}